(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"5OiB":function(t,e,i){"use strict";i.r(e);var n=i("ofXK"),r=i("tyNb"),o=i("AytR"),c=i("fXoL"),s=i("tk/3");let a=(()=>{class t{constructor(t){this.httpClient=t}getUsers(){return this.httpClient.get(o.a.api+"/user")}updateUser(t){return this.httpClient.put(o.a.api+"/user",t)}deleteUser(t){return this.httpClient.delete(o.a.api+"/user/"+t)}allowRegistration(){return this.httpClient.get(o.a.api+"/auth/allow")}updateRegistration(t){return this.httpClient.put(o.a.api+"/auth/allow?newVal="+t,{})}scrape(){return this.httpClient.put(o.a.api+"/scraper",{})}}return t.\u0275fac=function(e){return new(e||t)(c.ac(s.b))},t.\u0275prov=c.Mb({token:t,factory:t.\u0275fac}),t})();var l=i("ej43"),b=i("Wp6s"),d=i("bTqV");const u=function(){return["users"]},m=function(){return["getskills"]},g=function(){return["addskill"]};let h=(()=>{class t{constructor(t,e){this.authenticationService=t,this.adminService=e}scrape(){this.adminService.scrape().subscribe()}logout(){this.authenticationService.logout()}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(l.a),c.Qb(a))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-admin"]],features:[c.Bb([a])],decls:22,vars:6,consts:[[1,"container","main-div"],[1,"card","fullHeight"],[1,"row"],[1,"col-lg-3","fullHeight"],[3,"routerLink"],["mat-raised-button","","type","button",3,"click"],[1,"col-lg-9"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"mat-card",1),c.Wb(2,"div",2),c.Wb(3,"div",3),c.Wb(4,"a",4),c.Fc(5,"Users"),c.Vb(),c.Rb(6,"br"),c.Wb(7,"a",4),c.Fc(8,"Skill list"),c.Vb(),c.Rb(9,"br"),c.Wb(10,"a",4),c.Fc(11,"Add skill"),c.Vb(),c.Rb(12,"br"),c.Rb(13,"br"),c.Wb(14,"button",5),c.ec("click",(function(){return e.scrape()})),c.Fc(15,"Scrape manually"),c.Vb(),c.Rb(16,"br"),c.Rb(17,"br"),c.Wb(18,"button",5),c.ec("click",(function(){return e.logout()})),c.Fc(19,"Log out"),c.Vb(),c.Vb(),c.Wb(20,"div",6),c.Rb(21,"router-outlet"),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&t&&(c.Cb(4),c.oc("routerLink",c.qc(3,u)),c.Cb(3),c.oc("routerLink",c.qc(4,m)),c.Cb(3),c.oc("routerLink",c.qc(5,g)))},directives:[b.a,r.b,d.a,r.d],styles:[".fullHeight[_ngcontent-%COMP%]{height:calc(100vh - 150px);width:80vw}.main-div[_ngcontent-%COMP%]{height:100vh;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}"]}),t})();var p=i("N+K7"),f=i("f0Cb");function k(t,e){if(1&t&&(c.Wb(0,"div"),c.Fc(1),c.Vb()),2&t){const t=c.ic();c.Cb(1),c.Hc(" ",t.errorMessage," ")}}function v(t,e){if(1&t){const t=c.Xb();c.Wb(0,"tr"),c.Wb(1,"td"),c.Fc(2),c.Vb(),c.Wb(3,"td"),c.Wb(4,"button",1),c.ec("click",(function(){c.wc(t);const i=e.$implicit;return c.ic().deleteRow(i)})),c.Fc(5,"delete"),c.Vb(),c.Vb(),c.Vb()}if(2&t){const t=e.$implicit;c.Cb(2),c.Gc(t.name)}}let C=(()=>{class t{constructor(t,e){this.router=t,this.httpService=e,this.backEndProcessed=!0}ngOnInit(){this.getSkills()}getSkills(){this.httpService.findAllSkills().subscribe(t=>{const e=[];t._embedded.skills.forEach(t=>{e.push({href:t._links.self.href,name:t.name})}),this.skills=e})}deleteRow(t){this.httpService.deleteSkill(t.href).subscribe(()=>{this.backEndProcessed=!0;const e=this.skills.indexOf(t);this.skills.splice(e,1)},t=>{this.errorMessage=t.message,this.backEndProcessed=!1})}relinkSkills(){this.httpService.relinkSkills().subscribe(()=>{},t=>{this.errorMessage=t.message,this.backEndProcessed=!1})}navigateVacancies(){this.router.navigate([""])}addSkill(){this.router.navigate(["admin/addskill"])}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(r.a),c.Qb(p.a))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-skill-list"]],decls:30,vars:2,consts:[[2,"border","gray","margin-left","100px","margin-right","auto"],["mat-raised-button","","type","button",3,"click"],[4,"ngIf"],[1,"divider"],["id","skillTable",1,"table","table-bordered","table-striped",2,"border","none black","margin-left","120px","margin-right","auto"],[1,"thead-dark"],["scope","col"],[4,"ngFor","ngForOf"]],template:function(t,e){1&t&&(c.Wb(0,"div"),c.Wb(1,"table",0),c.Wb(2,"tr"),c.Wb(3,"button",1),c.ec("click",(function(){return e.navigateVacancies()})),c.Fc(4," back to Vacancies\xa0 "),c.Vb(),c.Vb(),c.Wb(5,"tr"),c.Fc(6,"\xa0"),c.Vb(),c.Wb(7,"tr"),c.Wb(8,"button",1),c.ec("click",(function(){return e.relinkSkills()})),c.Fc(9,"relink"),c.Vb(),c.Wb(10,"button",1),c.ec("click",(function(){return e.addSkill()})),c.Fc(11,"add skill"),c.Vb(),c.Vb(),c.Wb(12,"tr"),c.Fc(13,"\xa0"),c.Vb(),c.Wb(14,"tr"),c.Fc(15,"\xa0"),c.Vb(),c.Dc(16,k,2,1,"div",2),c.Vb(),c.Rb(17,"mat-divider",3),c.Vb(),c.Rb(18,"p"),c.Wb(19,"table",4),c.Wb(20,"thead",5),c.Wb(21,"tr"),c.Wb(22,"th",6),c.Fc(23,"Skill name"),c.Vb(),c.Wb(24,"th",6),c.Fc(25,"\xa0"),c.Vb(),c.Vb(),c.Vb(),c.Wb(26,"tbody"),c.Wb(27,"tr"),c.Fc(28,"\xa0"),c.Vb(),c.Dc(29,v,6,1,"tr",7),c.Vb(),c.Vb()),2&t&&(c.Cb(16),c.oc("ngIf",!e.backEndProcessed),c.Cb(13),c.oc("ngForOf",e.skills))},directives:[d.a,n.l,f.a,n.k],styles:[".centerborder[_ngcontent-%COMP%], .centernoborder[_ngcontent-%COMP%]{text-align:center}.centerborder[_ngcontent-%COMP%]{border:3px solid grey}"]}),t})();class V{}var w=i("3Pt+"),S=i("kmnG"),W=i("qFsG");function F(t,e){if(1&t&&(c.Wb(0,"div",9),c.Fc(1),c.Vb()),2&t){const t=c.ic().$implicit;c.Cb(1),c.Hc(" ",t.message," ")}}function y(t,e){if(1&t&&(c.Ub(0),c.Dc(1,F,2,1,"div",8),c.Tb()),2&t){const t=e.$implicit,i=c.ic();c.Cb(1),c.oc("ngIf",i.skillForm.get("skill").hasError(t.type)&&(i.skillForm.get("skill").dirty||i.skillForm.get("skill").touched))}}let R=(()=>{class t{constructor(t,e,i){this.router=t,this.httpService=e,this.fb=i,this.errorMessages={skill:[{type:"required",message:"Skill is required"},{type:"minlength",message:"Minimum length is 3 chars"}]}}ngOnInit(){this.skill=new V,this.skillForm=this.fb.group({skill:["",[w.p.required,w.p.minLength(3)]]})}onSubmit(){this.skill.name=this.skillForm.value.skill,this.httpService.saveSkill(this.skill).subscribe(()=>{this.gotoSkillListAfterAddition()},t=>{this.errorMessage="Error adding skill in backend: "+t.message})}gotoSkillListAfterAddition(){this.router.navigate(["admin/getskills"])}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(r.a),c.Qb(p.a),c.Qb(w.c))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-skill-form"]],decls:10,vars:3,consts:[[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"center"],["type","text","matInput","","placeholder","Skill","formControlName","skill"],[1,"error-messages"],[4,"ngFor","ngForOf"],[1,"centernoborder"],["mat-raised-button","","type","button",3,"disabled","click"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Wb(1,"form",1),c.ec("ngSubmit",(function(){return e.onSubmit()})),c.Wb(2,"div",2),c.Wb(3,"mat-form-field"),c.Rb(4,"input",3),c.Vb(),c.Wb(5,"div",4),c.Dc(6,y,2,1,"ng-container",5),c.Vb(),c.Vb(),c.Wb(7,"div",6),c.Wb(8,"button",7),c.ec("click",(function(){return e.onSubmit()})),c.Fc(9,"Submit"),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&t&&(c.Cb(1),c.oc("formGroup",e.skillForm),c.Cb(5),c.oc("ngForOf",e.errorMessages.skill),c.Cb(2),c.oc("disabled",!e.skillForm.valid))},directives:[w.q,w.m,w.g,S.b,W.b,w.b,w.l,w.f,n.k,d.a,n.l],styles:[".center[_ngcontent-%COMP%]{border:1px solid grey}.center[_ngcontent-%COMP%], .centernoborder[_ngcontent-%COMP%]{text-align:center}.error-messages[_ngcontent-%COMP%]{margin-top:-10px;margin-bottom:20px}.error-message[_ngcontent-%COMP%]{color:red}"]}),t})();var D=i("0IaG");let M=(()=>{class t{constructor(t,e){this.dialogRef=t,this.message=e}ngOnInit(){}onNoClick(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(D.g),c.Qb(D.a))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-delete-confirmation-dialog"]],decls:7,vars:2,consts:[["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",1,"btn-red",3,"click"],["mat-raised-button","","cdkFocusInitial","",1,"btn-green",3,"mat-dialog-close"]],template:function(t,e){1&t&&(c.Wb(0,"div",0),c.Fc(1),c.Vb(),c.Wb(2,"div",1),c.Wb(3,"button",2),c.ec("click",(function(){return e.onNoClick()})),c.Fc(4,"No"),c.Vb(),c.Wb(5,"button",3),c.Fc(6,"Yes"),c.Vb(),c.Vb()),2&t&&(c.Cb(1),c.Hc(" ",e.message,"\n"),c.Cb(4),c.oc("mat-dialog-close",!0))},directives:[D.e,D.c,d.a,D.d],styles:[".btn-green[_ngcontent-%COMP%]{color:#fff;background-color:#28a745}.btn-red[_ngcontent-%COMP%]{color:#fff;background-color:#dc3545}"]}),t})();var O=i("+0xr"),U=i("ykdy"),x=i("1jcm");function P(t,e){1&t&&(c.Wb(0,"th",10),c.Wb(1,"span",11),c.Fc(2,"delete_outline"),c.Vb(),c.Vb())}function _(t,e){if(1&t){const t=c.Xb();c.Wb(0,"td",12),c.Wb(1,"button",13),c.ec("click",(function(){c.wc(t);const i=e.$implicit;return c.ic().removeUser(i)})),c.Wb(2,"span",11),c.Fc(3,"delete_forever"),c.Vb(),c.Vb(),c.Vb()}if(2&t){const t=e.$implicit,i=c.ic();c.Cb(1),c.oc("disabled",i.currentUser.username==t.username)}}function I(t,e){1&t&&(c.Wb(0,"th",10),c.Fc(1," Id "),c.Vb())}function A(t,e){if(1&t&&(c.Wb(0,"td",12),c.Fc(1),c.Vb()),2&t){const t=e.$implicit;c.Cb(1),c.Hc(" ",t.id," ")}}function N(t,e){1&t&&(c.Wb(0,"th",10),c.Fc(1," Username "),c.Vb())}function E(t,e){if(1&t&&(c.Wb(0,"td",12),c.Fc(1),c.Vb()),2&t){const t=e.$implicit;c.Cb(1),c.Hc(" ",t.username," ")}}function Q(t,e){1&t&&(c.Wb(0,"th",10),c.Fc(1," Role "),c.Vb())}function H(t,e){if(1&t){const t=c.Xb();c.Wb(0,"td",12),c.Wb(1,"button",14),c.ec("click",(function(){c.wc(t);const i=e.$implicit;return c.ic().updateUser(i)})),c.Fc(2),c.Vb(),c.Vb()}if(2&t){const t=e.$implicit,i=c.ic();c.Cb(1),c.Fb("btn ","ROLE_ADMIN"==t.role?"btn-danger":"btn-secondary",""),c.oc("disabled",i.currentUser.username==t.username),c.Cb(1),c.Gc(t.role)}}function $(t,e){1&t&&c.Rb(0,"tr",15)}function L(t,e){1&t&&c.Rb(0,"tr",16)}let q=(()=>{class t{constructor(t,e,i){this.adminService=t,this.authenticationService=e,this.dialog=i,this.displayedColumns=["x","id","username","role"],this.allowSignups=new w.d}ngOnInit(){this.currentUser=this.authenticationService.currentUserValue,this.getUsers(),this.getAllowSignups()}updateUser(t){const e=Object.assign({},t);let i;delete e.role,e.roles.includes(U.a.ADMIN)?(e.roles=[U.a.USER],t.roles=[U.a.USER],i=0):(e.roles=[U.a.ADMIN],t.roles=[U.a.ADMIN],i=1),this.adminService.updateUser(e).subscribe(()=>{t.role=0===i?U.a.USER:U.a.ADMIN})}removeUser(t){this.dialog.open(M,{width:"350px",data:`Do you confirm the deletion of user ${t.username}?`}).afterClosed().subscribe(e=>{e&&this.adminService.deleteUser(t.id).subscribe(e=>{const i=this.dataSource.indexOf(t);this.dataSource.splice(i,1),this.table.renderRows()})})}toggleSignup(){this.adminService.updateRegistration(this.allowSignups.value).subscribe(()=>{})}getUsers(){this.adminService.getUsers().subscribe(t=>{t.forEach(t=>{t.role=t.roles.includes(U.a.ADMIN)?U.a.ADMIN:U.a.USER}),this.dataSource=t})}getAllowSignups(){this.adminService.allowRegistration().subscribe(t=>{this.allowSignups.setValue(t.allow)})}}return t.\u0275fac=function(e){return new(e||t)(c.Qb(a),c.Qb(l.a),c.Qb(D.b))},t.\u0275cmp=c.Kb({type:t,selectors:[["app-users"]],viewQuery:function(t,e){var i;1&t&&c.Jc(O.j,!0),2&t&&c.tc(i=c.fc())&&(e.table=i.first)},features:[c.Bb([a])],decls:18,vars:4,consts:[["mat-table","",3,"dataSource"],["matColumnDef","x"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","username"],["matColumnDef","role"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"formControl","change"],["mat-header-cell",""],[1,"material-icons"],["mat-cell",""],["mat-icon-button","","mat-raised-button","",3,"disabled","click"],["type","button",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(c.Wb(0,"table",0),c.Ub(1,1),c.Dc(2,P,3,0,"th",2),c.Dc(3,_,4,1,"td",3),c.Tb(),c.Ub(4,4),c.Dc(5,I,2,0,"th",2),c.Dc(6,A,2,1,"td",3),c.Tb(),c.Ub(7,5),c.Dc(8,N,2,0,"th",2),c.Dc(9,E,2,1,"td",3),c.Tb(),c.Ub(10,6),c.Dc(11,Q,2,0,"th",2),c.Dc(12,H,3,5,"td",3),c.Tb(),c.Dc(13,$,1,0,"tr",7),c.Dc(14,L,1,0,"tr",8),c.Vb(),c.Rb(15,"br"),c.Wb(16,"mat-slide-toggle",9),c.ec("change",(function(){return e.toggleSignup()})),c.Fc(17,"Allow new signups"),c.Vb()),2&t&&(c.oc("dataSource",e.dataSource),c.Cb(13),c.oc("matHeaderRowDef",e.displayedColumns),c.Cb(1),c.oc("matRowDefColumns",e.displayedColumns),c.Cb(2),c.oc("formControl",e.allowSignups))},directives:[O.j,O.c,O.e,O.b,O.g,O.i,x.a,w.l,w.e,O.d,O.a,d.a,O.f,O.h],styles:["table[_ngcontent-%COMP%]{width:100%}.btn[_ngcontent-%COMP%]{display:inline-block;font-weight:400;text-align:center;white-space:nowrap;vertical-align:middle;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;-webkit-transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.btn-danger[_ngcontent-%COMP%]{color:#fff;background-color:#dc3545;border-color:#dc3545}.btn-secondary[_ngcontent-%COMP%]{color:#fff;background-color:#6c757d;border-color:#6c757d}button[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}"]}),t})();const j=[{path:"",component:h,children:[{path:"",component:q},{path:"users",component:q},{path:"getskills",component:C},{path:"addskill",component:R}]}];let G=(()=>{class t{}return t.\u0275mod=c.Ob({type:t}),t.\u0275inj=c.Nb({factory:function(e){return new(e||t)},imports:[[r.c.forChild(j)],r.c]}),t})();var K=i("hctd");i.d(e,"AdminModule",(function(){return T}));let T=(()=>{class t{}return t.\u0275mod=c.Ob({type:t,bootstrap:[h]}),t.\u0275inj=c.Nb({factory:function(e){return new(e||t)},providers:[p.a],imports:[[n.c,w.o,w.h,G,K.a]]}),t})()}}]);