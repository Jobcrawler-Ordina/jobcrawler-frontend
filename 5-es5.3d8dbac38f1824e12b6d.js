function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"5OiB":function(e,t,n){"use strict";n.r(t);var i,r,c=n("ofXK"),o=n("tyNb"),a=n("AytR"),s=n("fXoL"),l=n("tk/3"),b=((i=function(){function e(t){_classCallCheck(this,e),this.httpClient=t}return _createClass(e,[{key:"getUsers",value:function(){return this.httpClient.get(a.a.api+"/user")}},{key:"updateUser",value:function(e){return this.httpClient.put(a.a.api+"/user",e)}},{key:"deleteUser",value:function(e){return this.httpClient.delete(a.a.api+"/user/"+e)}},{key:"allowRegistration",value:function(){return this.httpClient.get(a.a.api+"/auth/allow")}},{key:"updateRegistration",value:function(e){return this.httpClient.put(a.a.api+"/auth/allow?newVal="+e,{})}},{key:"scrape",value:function(){return this.httpClient.put(a.a.api+"/scraper",{})}}]),e}()).\u0275fac=function(e){return new(e||i)(s.ac(l.b))},i.\u0275prov=s.Mb({token:i,factory:i.\u0275fac}),i),u=n("ej43"),d=n("Wp6s"),f=n("bTqV"),m=function(){return["users"]},h=function(){return["getskills"]},g=function(){return["addskill"]},p=((r=function(){function e(t,n){_classCallCheck(this,e),this.authenticationService=t,this.adminService=n}return _createClass(e,[{key:"scrape",value:function(){this.adminService.scrape().subscribe()}},{key:"logout",value:function(){this.authenticationService.logout()}}]),e}()).\u0275fac=function(e){return new(e||r)(s.Qb(u.a),s.Qb(b))},r.\u0275cmp=s.Kb({type:r,selectors:[["app-admin"]],features:[s.Bb([b])],decls:22,vars:6,consts:[[1,"container","main-div"],[1,"card","fullHeight"],[1,"row"],[1,"col-lg-3","fullHeight"],[3,"routerLink"],["mat-raised-button","","type","button",3,"click"],[1,"col-lg-9"]],template:function(e,t){1&e&&(s.Wb(0,"div",0),s.Wb(1,"mat-card",1),s.Wb(2,"div",2),s.Wb(3,"div",3),s.Wb(4,"a",4),s.Fc(5,"Users"),s.Vb(),s.Rb(6,"br"),s.Wb(7,"a",4),s.Fc(8,"Skill list"),s.Vb(),s.Rb(9,"br"),s.Wb(10,"a",4),s.Fc(11,"Add skill"),s.Vb(),s.Rb(12,"br"),s.Rb(13,"br"),s.Wb(14,"button",5),s.ec("click",(function(){return t.scrape()})),s.Fc(15,"Scrape manually"),s.Vb(),s.Rb(16,"br"),s.Rb(17,"br"),s.Wb(18,"button",5),s.ec("click",(function(){return t.logout()})),s.Fc(19,"Log out"),s.Vb(),s.Vb(),s.Wb(20,"div",6),s.Rb(21,"router-outlet"),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&e&&(s.Cb(4),s.oc("routerLink",s.qc(3,m)),s.Cb(3),s.oc("routerLink",s.qc(4,h)),s.Cb(3),s.oc("routerLink",s.qc(5,g)))},directives:[d.a,o.b,f.a,o.d],styles:[".fullHeight[_ngcontent-%COMP%]{height:calc(100vh - 150px);width:80vw}.main-div[_ngcontent-%COMP%]{height:100vh;display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}"]}),r),k=n("N+K7"),v=n("f0Cb");function C(e,t){if(1&e&&(s.Wb(0,"div"),s.Fc(1),s.Vb()),2&e){var n=s.ic();s.Cb(1),s.Hc(" ",n.errorMessage," ")}}function y(e,t){if(1&e){var n=s.Xb();s.Wb(0,"tr"),s.Wb(1,"td"),s.Fc(2),s.Vb(),s.Wb(3,"td"),s.Wb(4,"button",1),s.ec("click",(function(){s.wc(n);var e=t.$implicit;return s.ic().deleteRow(e)})),s.Fc(5,"delete"),s.Vb(),s.Vb(),s.Vb()}if(2&e){var i=t.$implicit;s.Cb(2),s.Gc(i.name)}}var V,w=((V=function(){function e(t,n){_classCallCheck(this,e),this.router=t,this.httpService=n,this.backEndProcessed=!0}return _createClass(e,[{key:"ngOnInit",value:function(){this.getSkills()}},{key:"getSkills",value:function(){var e=this;this.httpService.findAllSkills().subscribe((function(t){var n=[];t._embedded.skills.forEach((function(e){n.push({href:e._links.self.href,name:e.name})})),e.skills=n}))}},{key:"deleteRow",value:function(e){var t=this;this.httpService.deleteSkill(e.href).subscribe((function(){t.backEndProcessed=!0;var n=t.skills.indexOf(e);t.skills.splice(n,1)}),(function(e){t.errorMessage=e.message,t.backEndProcessed=!1}))}},{key:"relinkSkills",value:function(){var e=this;this.httpService.relinkSkills().subscribe((function(){}),(function(t){e.errorMessage=t.message,e.backEndProcessed=!1}))}},{key:"navigateVacancies",value:function(){this.router.navigate([""])}},{key:"addSkill",value:function(){this.router.navigate(["admin/addskill"])}}]),e}()).\u0275fac=function(e){return new(e||V)(s.Qb(o.a),s.Qb(k.a))},V.\u0275cmp=s.Kb({type:V,selectors:[["app-skill-list"]],decls:30,vars:2,consts:[[2,"border","gray","margin-left","100px","margin-right","auto"],["mat-raised-button","","type","button",3,"click"],[4,"ngIf"],[1,"divider"],["id","skillTable",1,"table","table-bordered","table-striped",2,"border","none black","margin-left","120px","margin-right","auto"],[1,"thead-dark"],["scope","col"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(s.Wb(0,"div"),s.Wb(1,"table",0),s.Wb(2,"tr"),s.Wb(3,"button",1),s.ec("click",(function(){return t.navigateVacancies()})),s.Fc(4," back to Vacancies\xa0 "),s.Vb(),s.Vb(),s.Wb(5,"tr"),s.Fc(6,"\xa0"),s.Vb(),s.Wb(7,"tr"),s.Wb(8,"button",1),s.ec("click",(function(){return t.relinkSkills()})),s.Fc(9,"relink"),s.Vb(),s.Wb(10,"button",1),s.ec("click",(function(){return t.addSkill()})),s.Fc(11,"add skill"),s.Vb(),s.Vb(),s.Wb(12,"tr"),s.Fc(13,"\xa0"),s.Vb(),s.Wb(14,"tr"),s.Fc(15,"\xa0"),s.Vb(),s.Dc(16,C,2,1,"div",2),s.Vb(),s.Rb(17,"mat-divider",3),s.Vb(),s.Rb(18,"p"),s.Wb(19,"table",4),s.Wb(20,"thead",5),s.Wb(21,"tr"),s.Wb(22,"th",6),s.Fc(23,"Skill name"),s.Vb(),s.Wb(24,"th",6),s.Fc(25,"\xa0"),s.Vb(),s.Vb(),s.Vb(),s.Wb(26,"tbody"),s.Wb(27,"tr"),s.Fc(28,"\xa0"),s.Vb(),s.Dc(29,y,6,1,"tr",7),s.Vb(),s.Vb()),2&e&&(s.Cb(16),s.oc("ngIf",!t.backEndProcessed),s.Cb(13),s.oc("ngForOf",t.skills))},directives:[f.a,c.l,v.a,c.k],styles:[".centerborder[_ngcontent-%COMP%], .centernoborder[_ngcontent-%COMP%]{text-align:center}.centerborder[_ngcontent-%COMP%]{border:3px solid grey}"]}),V),S=function e(){_classCallCheck(this,e)},W=n("3Pt+"),F=n("kmnG"),_=n("qFsG");function R(e,t){if(1&e&&(s.Wb(0,"div",9),s.Fc(1),s.Vb()),2&e){var n=s.ic().$implicit;s.Cb(1),s.Hc(" ",n.message," ")}}function D(e,t){if(1&e&&(s.Ub(0),s.Dc(1,R,2,1,"div",8),s.Tb()),2&e){var n=t.$implicit,i=s.ic();s.Cb(1),s.oc("ngIf",i.skillForm.get("skill").hasError(n.type)&&(i.skillForm.get("skill").dirty||i.skillForm.get("skill").touched))}}var M,O,P=((M=function(){function e(t,n,i){_classCallCheck(this,e),this.router=t,this.httpService=n,this.fb=i,this.errorMessages={skill:[{type:"required",message:"Skill is required"},{type:"minlength",message:"Minimum length is 3 chars"}]}}return _createClass(e,[{key:"ngOnInit",value:function(){this.skill=new S,this.skillForm=this.fb.group({skill:["",[W.p.required,W.p.minLength(3)]]})}},{key:"onSubmit",value:function(){var e=this;this.skill.name=this.skillForm.value.skill,this.httpService.saveSkill(this.skill).subscribe((function(){e.gotoSkillListAfterAddition()}),(function(t){e.errorMessage="Error adding skill in backend: "+t.message}))}},{key:"gotoSkillListAfterAddition",value:function(){this.router.navigate(["admin/getskills"])}}]),e}()).\u0275fac=function(e){return new(e||M)(s.Qb(o.a),s.Qb(k.a),s.Qb(W.c))},M.\u0275cmp=s.Kb({type:M,selectors:[["app-skill-form"]],decls:10,vars:3,consts:[[1,"card-body"],[3,"formGroup","ngSubmit"],[1,"center"],["type","text","matInput","","placeholder","Skill","formControlName","skill"],[1,"error-messages"],[4,"ngFor","ngForOf"],[1,"centernoborder"],["mat-raised-button","","type","button",3,"disabled","click"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(e,t){1&e&&(s.Wb(0,"div",0),s.Wb(1,"form",1),s.ec("ngSubmit",(function(){return t.onSubmit()})),s.Wb(2,"div",2),s.Wb(3,"mat-form-field"),s.Rb(4,"input",3),s.Vb(),s.Wb(5,"div",4),s.Dc(6,D,2,1,"ng-container",5),s.Vb(),s.Vb(),s.Wb(7,"div",6),s.Wb(8,"button",7),s.ec("click",(function(){return t.onSubmit()})),s.Fc(9,"Submit"),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&e&&(s.Cb(1),s.oc("formGroup",t.skillForm),s.Cb(5),s.oc("ngForOf",t.errorMessages.skill),s.Cb(2),s.oc("disabled",!t.skillForm.valid))},directives:[W.q,W.m,W.g,F.b,_.b,W.b,W.l,W.f,c.k,f.a,c.l],styles:[".center[_ngcontent-%COMP%]{border:1px solid grey}.center[_ngcontent-%COMP%], .centernoborder[_ngcontent-%COMP%]{text-align:center}.error-messages[_ngcontent-%COMP%]{margin-top:-10px;margin-bottom:20px}.error-message[_ngcontent-%COMP%]{color:red}"]}),M),U=n("0IaG"),x=((O=function(){function e(t,n){_classCallCheck(this,e),this.dialogRef=t,this.message=n}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onNoClick",value:function(){this.dialogRef.close()}}]),e}()).\u0275fac=function(e){return new(e||O)(s.Qb(U.g),s.Qb(U.a))},O.\u0275cmp=s.Kb({type:O,selectors:[["app-delete-confirmation-dialog"]],decls:7,vars:2,consts:[["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",1,"btn-red",3,"click"],["mat-raised-button","","cdkFocusInitial","",1,"btn-green",3,"mat-dialog-close"]],template:function(e,t){1&e&&(s.Wb(0,"div",0),s.Fc(1),s.Vb(),s.Wb(2,"div",1),s.Wb(3,"button",2),s.ec("click",(function(){return t.onNoClick()})),s.Fc(4,"No"),s.Vb(),s.Wb(5,"button",3),s.Fc(6,"Yes"),s.Vb(),s.Vb()),2&e&&(s.Cb(1),s.Hc(" ",t.message,"\n"),s.Cb(4),s.oc("mat-dialog-close",!0))},directives:[U.e,U.c,f.a,U.d],styles:[".btn-green[_ngcontent-%COMP%]{color:#fff;background-color:#28a745}.btn-red[_ngcontent-%COMP%]{color:#fff;background-color:#dc3545}"]}),O),I=n("+0xr"),A=n("ykdy"),E=n("1jcm");function N(e,t){1&e&&(s.Wb(0,"th",10),s.Wb(1,"span",11),s.Fc(2,"delete_outline"),s.Vb(),s.Vb())}function Q(e,t){if(1&e){var n=s.Xb();s.Wb(0,"td",12),s.Wb(1,"button",13),s.ec("click",(function(){s.wc(n);var e=t.$implicit;return s.ic().removeUser(e)})),s.Wb(2,"span",11),s.Fc(3,"delete_forever"),s.Vb(),s.Vb(),s.Vb()}if(2&e){var i=t.$implicit,r=s.ic();s.Cb(1),s.oc("disabled",r.currentUser.username==i.username)}}function H(e,t){1&e&&(s.Wb(0,"th",10),s.Fc(1," Id "),s.Vb())}function L(e,t){if(1&e&&(s.Wb(0,"td",12),s.Fc(1),s.Vb()),2&e){var n=t.$implicit;s.Cb(1),s.Hc(" ",n.id," ")}}function $(e,t){1&e&&(s.Wb(0,"th",10),s.Fc(1," Username "),s.Vb())}function j(e,t){if(1&e&&(s.Wb(0,"td",12),s.Fc(1),s.Vb()),2&e){var n=t.$implicit;s.Cb(1),s.Hc(" ",n.username," ")}}function q(e,t){1&e&&(s.Wb(0,"th",10),s.Fc(1," Role "),s.Vb())}function T(e,t){if(1&e){var n=s.Xb();s.Wb(0,"td",12),s.Wb(1,"button",14),s.ec("click",(function(){s.wc(n);var e=t.$implicit;return s.ic().updateUser(e)})),s.Fc(2),s.Vb(),s.Vb()}if(2&e){var i=t.$implicit,r=s.ic();s.Cb(1),s.Fb("btn ","ROLE_ADMIN"==i.role?"btn-danger":"btn-secondary",""),s.oc("disabled",r.currentUser.username==i.username),s.Cb(1),s.Gc(i.role)}}function G(e,t){1&e&&s.Rb(0,"tr",15)}function K(e,t){1&e&&s.Rb(0,"tr",16)}var X,B,J=((X=function(){function e(t,n,i){_classCallCheck(this,e),this.adminService=t,this.authenticationService=n,this.dialog=i,this.displayedColumns=["x","id","username","role"],this.allowSignups=new W.d}return _createClass(e,[{key:"ngOnInit",value:function(){this.currentUser=this.authenticationService.currentUserValue,this.getUsers(),this.getAllowSignups()}},{key:"updateUser",value:function(e){var t,n=Object.assign({},e);delete n.role,n.roles.includes(A.a.ADMIN)?(n.roles=[A.a.USER],e.roles=[A.a.USER],t=0):(n.roles=[A.a.ADMIN],e.roles=[A.a.ADMIN],t=1),this.adminService.updateUser(n).subscribe((function(){e.role=0===t?A.a.USER:A.a.ADMIN}))}},{key:"removeUser",value:function(e){var t=this;this.dialog.open(x,{width:"350px",data:"Do you confirm the deletion of user ".concat(e.username,"?")}).afterClosed().subscribe((function(n){n&&t.adminService.deleteUser(e.id).subscribe((function(n){var i=t.dataSource.indexOf(e);t.dataSource.splice(i,1),t.table.renderRows()}))}))}},{key:"toggleSignup",value:function(){this.adminService.updateRegistration(this.allowSignups.value).subscribe((function(){}))}},{key:"getUsers",value:function(){var e=this;this.adminService.getUsers().subscribe((function(t){t.forEach((function(e){e.role=e.roles.includes(A.a.ADMIN)?A.a.ADMIN:A.a.USER})),e.dataSource=t}))}},{key:"getAllowSignups",value:function(){var e=this;this.adminService.allowRegistration().subscribe((function(t){e.allowSignups.setValue(t.allow)}))}}]),e}()).\u0275fac=function(e){return new(e||X)(s.Qb(b),s.Qb(u.a),s.Qb(U.b))},X.\u0275cmp=s.Kb({type:X,selectors:[["app-users"]],viewQuery:function(e,t){var n;1&e&&s.Jc(I.j,!0),2&e&&s.tc(n=s.fc())&&(t.table=n.first)},features:[s.Bb([b])],decls:18,vars:4,consts:[["mat-table","",3,"dataSource"],["matColumnDef","x"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id"],["matColumnDef","username"],["matColumnDef","role"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"formControl","change"],["mat-header-cell",""],[1,"material-icons"],["mat-cell",""],["mat-icon-button","","mat-raised-button","",3,"disabled","click"],["type","button",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(s.Wb(0,"table",0),s.Ub(1,1),s.Dc(2,N,3,0,"th",2),s.Dc(3,Q,4,1,"td",3),s.Tb(),s.Ub(4,4),s.Dc(5,H,2,0,"th",2),s.Dc(6,L,2,1,"td",3),s.Tb(),s.Ub(7,5),s.Dc(8,$,2,0,"th",2),s.Dc(9,j,2,1,"td",3),s.Tb(),s.Ub(10,6),s.Dc(11,q,2,0,"th",2),s.Dc(12,T,3,5,"td",3),s.Tb(),s.Dc(13,G,1,0,"tr",7),s.Dc(14,K,1,0,"tr",8),s.Vb(),s.Rb(15,"br"),s.Wb(16,"mat-slide-toggle",9),s.ec("change",(function(){return t.toggleSignup()})),s.Fc(17,"Allow new signups"),s.Vb()),2&e&&(s.oc("dataSource",t.dataSource),s.Cb(13),s.oc("matHeaderRowDef",t.displayedColumns),s.Cb(1),s.oc("matRowDefColumns",t.displayedColumns),s.Cb(2),s.oc("formControl",t.allowSignups))},directives:[I.j,I.c,I.e,I.b,I.g,I.i,E.a,W.l,W.e,I.d,I.a,f.a,I.f,I.h],styles:["table[_ngcontent-%COMP%]{width:100%}.btn[_ngcontent-%COMP%]{display:inline-block;font-weight:400;text-align:center;white-space:nowrap;vertical-align:middle;border:1px solid transparent;padding:.375rem .75rem;font-size:1rem;line-height:1.5;border-radius:.25rem;-webkit-transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}.btn-danger[_ngcontent-%COMP%]{color:#fff;background-color:#dc3545;border-color:#dc3545}.btn-secondary[_ngcontent-%COMP%]{color:#fff;background-color:#6c757d;border-color:#6c757d}button[disabled][_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed}"]}),X),z=[{path:"",component:p,children:[{path:"",component:J},{path:"users",component:J},{path:"getskills",component:w},{path:"addskill",component:P}]}],Y=((B=function e(){_classCallCheck(this,e)}).\u0275mod=s.Ob({type:B}),B.\u0275inj=s.Nb({factory:function(e){return new(e||B)},imports:[[o.c.forChild(z)],o.c]}),B),Z=n("hctd");n.d(t,"AdminModule",(function(){return te}));var ee,te=((ee=function e(){_classCallCheck(this,e)}).\u0275mod=s.Ob({type:ee,bootstrap:[p]}),ee.\u0275inj=s.Nb({factory:function(e){return new(e||ee)},providers:[k.a],imports:[[c.c,W.o,W.h,Y,Z.a]]}),ee)}}]);